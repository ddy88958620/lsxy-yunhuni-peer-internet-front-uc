$(function(){"use strict";var e=window.console||{log:function(){}},t=$("#image"),o=$("#download"),a=$("#dataX"),r=$("#dataY"),p=$("#dataHeight"),n=$("#dataWidth"),c=$("#dataRotate"),d=$("#dataScaleX"),i=$("#dataScaleY"),l={aspectRatio:16/9,preview:".img-preview",crop:function(e){a.val(Math.round(e.x)),r.val(Math.round(e.y)),p.val(Math.round(e.height)),n.val(Math.round(e.width)),c.val(e.rotate),d.val(e.scaleX),i.val(e.scaleY)}};$('[data-toggle="tooltip"]').tooltip(),t.on({"build.cropper":function(t){e.log(t.type)},"built.cropper":function(t){e.log(t.type)},"cropstart.cropper":function(t){e.log(t.type,t.action)},"cropmove.cropper":function(t){e.log(t.type,t.action)},"cropend.cropper":function(t){e.log(t.type,t.action)},"crop.cropper":function(t){e.log(t.type,t.x,t.y,t.width,t.height,t.rotate,t.scaleX,t.scaleY)},"zoom.cropper":function(t){e.log(t.type,t.ratio)}}).cropper(l),$.isFunction(document.createElement("canvas").getContext)||$('button[data-method="getCroppedCanvas"]').prop("disabled",!0),"undefined"==typeof document.createElement("cropper").style.transition&&($('button[data-method="rotate"]').prop("disabled",!0),$('button[data-method="scale"]').prop("disabled",!0)),"undefined"==typeof o[0].download&&o.addClass("disabled"),$(".docs-toggles").on("change","input",function(){var e,o,a=$(this),r=a.attr("name"),p=a.prop("type");t.data("cropper")&&("checkbox"===p?(l[r]=a.prop("checked"),e=t.cropper("getCropBoxData"),o=t.cropper("getCanvasData"),l.built=function(){t.cropper("setCropBoxData",e),t.cropper("setCanvasData",o)}):"radio"===p&&(l[r]=a.val()),t.cropper("destroy").cropper(l))}),$(".docs-buttons").on("click","[data-method]",function(){var a,r,p=$(this),n=p.data();if(!p.prop("disabled")&&!p.hasClass("disabled")&&t.data("cropper")&&n.method){if(n=$.extend({},n),"undefined"!=typeof n.target&&(a=$(n.target),"undefined"==typeof n.option))try{n.option=JSON.parse(a.val())}catch(c){e.log(c.message)}switch(r=t.cropper(n.method,n.option,n.secondOption),n.method){case"scaleX":case"scaleY":$(this).data("option",-n.option);break;case"getCroppedCanvas":r&&($("#getCroppedCanvasModal").modal().find(".modal-body").html(r),o.hasClass("disabled")||o.attr("href",r.toDataURL()))}if($.isPlainObject(r)&&a)try{a.val(JSON.stringify(r))}catch(c){e.log(c.message)}}}),$(document.body).on("keydown",function(e){if(t.data("cropper")&&!(this.scrollTop>300))switch(e.which){case 37:e.preventDefault(),t.cropper("move",-1,0);break;case 38:e.preventDefault(),t.cropper("move",0,-1);break;case 39:e.preventDefault(),t.cropper("move",1,0);break;case 40:e.preventDefault(),t.cropper("move",0,1)}});var s,u=$("#inputImage"),h=window.URL||window.webkitURL;h?u.change(function(){var e,o=this.files;t.data("cropper")&&o&&o.length&&(e=o[0],/^image\/\w+$/.test(e.type)?(s=h.createObjectURL(e),t.one("built.cropper",function(){h.revokeObjectURL(s)}).cropper("reset").cropper("replace",s),u.val("")):window.alert("Please choose an image file."))}):u.prop("disabled",!0).parent().addClass("disabled")});