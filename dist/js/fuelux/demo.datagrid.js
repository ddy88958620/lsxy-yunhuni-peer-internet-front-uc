!function(e){e(function(){var t=function(e){this._formatter=e.formatter,this._columns=e.columns,this._delay=e.delay};t.prototype={columns:function(){return this._columns},data:function(t,a){var o="js/data/datagrid.json",r=this;setTimeout(function(){var n=e.extend(!0,[],r._data);e.ajax(o,{dataType:"json",async:!1,type:"GET"}).done(function(e){n=e.geonames,t.search&&(n=_.filter(n,function(e){var a=!1;return _.each(e,function(e){(_.isString(e)||_.isFinite(e))&&e.toString().toLowerCase().indexOf(t.search.toLowerCase())!==-1&&(a=!0)}),a})),t.filter&&(n=_.filter(n,function(e){switch(t.filter.value){case"lt5m":if(e.population<5e6)return!0;break;case"gte5m":if(e.population>=5e6)return!0;break;default:return!0}}));var o=n.length;t.sortProperty&&(n=_.sortBy(n,t.sortProperty),"desc"===t.sortDirection&&n.reverse());var i=t.pageIndex*t.pageSize,l=i+t.pageSize,s=l>o?o:l,c=Math.ceil(o/t.pageSize),u=t.pageIndex+1,d=i+1;n=n.slice(i,l),r._formatter&&r._formatter(n),a({data:n,start:d,end:s,count:o,pages:c,page:u})}).fail(function(e){})},r._delay)}},e("#MyStretchGrid").each(function(){e(this).datagrid({dataSource:new t({columns:[{property:"toponymName",label:"Name",sortable:!0},{property:"countrycode",label:"Country",sortable:!0},{property:"population",label:"Population",sortable:!0},{property:"fcodeName",label:"Type",sortable:!0},{property:"geonameId",label:"Edit",sortable:!0}],formatter:function(t){e.each(t,function(e,t){t.geonameId='<a href="modal.html?geonameid='+t.geonameId+'" data-toggle="ajaxModal"><i class="fa fa-pencil"></i></a>'})}})})})})}(window.jQuery);