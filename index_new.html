<!DOCTYPE html>
<html>
<body>

  <!-- header -->
  <div class="include" data-include="header"></div>
  <!-- end header -->

    <section class='aside-section'>
        <section class="hbox stretch">
          <!-- .aside -->
          <aside class="bg-Green lter aside hidden-print include" data-include="aside" id="nav"></aside>
            <!-- /.aside -->

            <section id="content">


                <section class="hbox stretch">

                    <aside>
                        <section class="vbox xbox">
                          <!-- 如果没有三级导航 这段代码注释-->
                            <!-- <div class="head&#45;box"> <a href="#subNav" data&#45;toggle="class:hide"> <i class="fa fa&#45;angle&#45;left text"></i> <i class="fa fa&#45;angle&#45;right text&#45;active"></i> </a> </div> -->
                         <!-- <marquee behavior="scroll">
                            单方向循环滚动
                          </marquee>-->

                          <script language="JavaScript" type="text/javascript">
                            var marqueeContent=new Array();
                            marqueeContent[0]="<span >云呼你有新的讯息1云呼你有新的讯息3云呼你有新的讯息3云呼你有云呼你有新的讯息3云呼你有新的讯息3云呼你有新的讯息3云呼你有新的讯息3新的讯息3云呼你有新的讯息3云呼你有新的讯息3云呼你有新的讯息3云呼你有新的讯息3云呼你有新的讯息3云呼你有新的讯息3云呼你有新的讯息3云呼你有新的讯息3云呼你有新的讯息3</span>";

                            var marqueeInterval=new Array();
                            var marqueeId=0;
                            var marqueeDelay=2000;
                            var marqueeHeight=20;
                            //初始化
                            function initMarquee() {
                              var str=marqueeContent[0];
                              document.write('<div class="common-info" ><div id="marqueeBox" style="overflow:hidden;float:left;height:'+marqueeHeight+'px; width: 80%;" onmouseover="clearInterval(marqueeInterval[0])" onmouseout="marqueeInterval[0]=setInterval(\'startMarquee()\',marqueeDelay)"><div>'+str+'</div></div><span class="close" id="common-close"></span><a class="detail" >查看详情</a></div>');
                              marqueeId++;
                              marqueeInterval[0]=setInterval("startMarquee()",marqueeDelay);
                            }

                            //开始滚动
                            function startMarquee() {
                              var str=marqueeContent[marqueeId];
                              marqueeId++;
                              if(marqueeId>=marqueeContent.length) marqueeId=0;
                              if(document.getElementById("marqueeBox").childNodes.length==1) {
                                var nextLine=document.createElement('DIV');
                                nextLine.innerHTML=str;
                                document.getElementById("marqueeBox").appendChild(nextLine);
                              }
                              else {
                                document.getElementById("marqueeBox").childNodes[0].innerHTML=str;
                                document.getElementById("marqueeBox").appendChild(document.getElementById("marqueeBox").childNodes[0]);
                                document.getElementById("marqueeBox").scrollTop=0;
                              }
                              clearInterval(marqueeInterval[1]);
                              marqueeInterval[1]=setInterval("scrollMarquee()",20);
                            }

                            //
                            function scrollMarquee() {
                              document.getElementById("marqueeBox").scrollTop++;
                              if(document.getElementById("marqueeBox").scrollTop%marqueeHeight==(marqueeHeight-1)){
                                clearInterval(marqueeInterval[1]);
                              }
                            }

                            initMarquee();
                          </script>

                          <section class="scrollable wrapper w-f">
                                <section class="panel panel-default yunhuni-personal">
                                    <div class="row m-l-none m-r-none bg-light lter">

                                        <div class="col-md-3 padder-v fix-padding">
                                          <div class='wrappernewBox green-border-top'>
                                            <span class="pull-left m-r-sm">
                                              <img src="images/index/avatar-middle.png" width="80"/>
                                            </span>
                                            <span class="h5 block m-t-xs">
                                              <i class="iconfont icon-yue middleicon"></i>
                                              <span class="inline-block">余额(元)</span>
                                            </span>
                                            <span class="block m-t-25">
                                              <small class="text-muted text-uc account-money green">￥998</small>
                                              <small class="account-number-decimal green">.00</small>
                                              元
                                            </span>
                                            <div class="box-footer">
                                              <button class="btn btn-primary" >充值</button>
                                              <button class="btn btn-default" >消费情况</button>
                                            </div>
                                          </div>
                                        </div>

                                        <div class="col-md-3 padder-v fix-padding">
                                          <div class='wrappernewBox blue-border-top'>
                                             <span class="h5 block m-t-xs"> <i class="iconfont icon-oc-appnum middleicon m-r-5"></i><span class="inline-block">应用数（上线数/总数)</span></span>
                                             <span class="h5 block m-t-25 text-center "><span class="green bigger-font-size">10/25</span>个</span>
                                             <div class="box-footer">
                                               <a class="btn btn-primary" >查看详情</a>
                                             </div>
                                          </div>
                                        </div>

                                        <div class="col-md-3 padder-v fix-padding">
                                          <div class='wrappernewBox yellow-border-top'>
                                            <span class="h5 block m-t-xs"> <i class="iconfont icon-huawuliang middleicon m-r-5"></i><span class="inline-block">平均通话时长</span></span>
                                            <span class="h5 block m-t-25 text-center ">
                                              <span class="green bigger-font-size">--</span>
                                            </span>

                                          </div>
                                        </div>

                                        <div class="col-md-3 padder-v fix-padding">
                                          <div class='wrappernewBox pink-border-top'>
                                            <span class="h5 block m-t-xs"> <i class="iconfont icon-oc-callrate middleicon m-r-5"></i><span class="inline-block">接通率</span></span>
                                            <span class="h5 block m-t-25 text-center ">
                                                <span class="green bigger-font-size">90%</span>
                                              </span>

                                          </div>
                                        </div>



                                    </div>
                                </section>
                                <section class="panel panel-default pos-rlt clearfix ">
                                  <div class="sectionnewWrap">
                                    <header class="panel-heading">
                                        <div class="h5 ">开发者账号</div>
                                    </header>
                                    <div class="panel-body clearfix border-top-none">
                                      <p>
                                        <span class="iconfont icon-oc-api smallicon inline-block develop-icon"></span>
                                        <span class="index-key"><strong>接口API:</strong></span>
                                        <span class="index-api" id="restapi">http://api.yunhuni.com/1234135312321414134/</span>
                                        <span>
                                          <a href="#"><i class="iconfont icon-oc-small-copy inline-block develop-icon"></i>API文档</a>
                                          <a id="copyapi" data-clipboard-text="http://api.yunhuni.com/1234135312321414134/"><i class="iconfont icon-oc-small-copy inline-block develop-icon"></i>复制</a>
                                        </span>
                                      </p>
                                      <p>
                                        <span class="iconfont icon-oc-secrekey smallicon inline-block develop-icon"></span>
                                        <span class="index-key"><strong>密钥:</strong></span>
                                        <span class="index-api" id="secretkey">1234135312321414134</span>
                                        <span>
                                          <a class='reset_confirm'><i class="iconfont icon-resert smallicon inline-block develop-icon"></i>重新生成</a>
                                          <a id="copysecrekey" data-clipboard-text="123456789" ><i class="iconfont icon-oc-small-copy"></i>复制</a>
                                        </span>
                                        <span>
                                          <a class='tips-error tips-key'></a>
                                        </span>
                                      </p>
                                      <p>
                                        <span class="iconfont icon-oc-certid smallicon inline-block develop-icon"></span>
                                        <span class="index-key"><strong>鉴权账号:</strong></span>
                                        <span class="index-api" id="certid" >123456789123456789</span>
                                        <span>
                                          <a id="copycertid" data-clipboard-text="11111111" ><i class="iconfont icon-oc-small-copy inline-block develop-icon"></i>复制</a>
                                        </span>
                                      </p>
                                    </div>
                                  </div>
                                </section>

                                <section class="panel panel-default pos-rlt clearfix ">
                              <div class="sectionnewWrap">
                                <header class="panel-heading">
                                  <div class="h5 ">今日数据</div>
                                </header>
                                <div class="panel-body clearfix border-top-none remove-padding">
                                  <div class="row m-l-none m-r-none bg-light lter">
                                    <div class="col-md-2 padder-v fix-padding width-twenty-percent" >

                                      <div class="warpbox">
                                        <div class="">
                                          <i class="icon iconfont icon-oc-wallet bigicon"></i>
                                          <span class="green money" >188.<span class="small-font-size">33</span> </span>
                                        </div>
                                        <div class="middle-font-size middle-font-color" >
                                          消费额(元)
                                        </div>
                                      </div>

                                    </div>
                                    <div class="col-md-2 padder-v fix-padding width-twenty-percent">

                                      <div class="warpbox">
                                        <div class="">
                                          <i class="icon iconfont icon-oc-msg1 bigicon"></i>
                                          <span class="green money" >123456 </span>
                                        </div>
                                        <div class="middle-font-size middle-font-color" >
                                          会话量(次)
                                        </div>
                                      </div>

                                    </div>
                                    <div class="col-md-2 padder-v fix-padding width-twenty-percent" >
                                      <div class="warpbox">
                                        <div class="">
                                          <i class="icon iconfont icon-oc-mobile bigicon"></i>
                                          <span class="green money" >0 </span>
                                        </div>
                                        <div class="middle-font-size middle-font-color" >
                                          话务量(分钟)
                                        </div>
                                      </div>


                                    </div>
                                    <div class="col-md-2 padder-v fix-padding width-twenty-percent">
                                      <div class="warpbox">
                                        <div class="">
                                          <i class="icon iconfont icon-oc-talktime bigicon"></i>
                                          <span class="green money" >0 </span>
                                        </div>
                                        <div class="middle-font-size middle-font-color" >
                                          平均通话时长(分钟)
                                        </div>
                                      </div>


                                    </div>
                                    <div class="col-md-2 padder-v fix-padding width-twenty-percent" >

                                      <div class="warpbox remove-border">
                                        <div class="">
                                          <i class="icon iconfont icon-oc-callrate bigicon"></i>
                                          <span class="green money" >0 </span>
                                        </div>
                                        <div class="middle-font-size middle-font-color" >
                                          接通率(%)
                                        </div>
                                      </div>

                                    </div>

                                  </div>


                                </div>
                              </div>
                            </section>

                            <section class="panel panel-default pos-rlt clearfix ">
                              <div class="sectionWrap">
                                <div class="panel-body clearfix">
                                  <div class="none-newapp">
                                    <img src="./images/index/avatar-big.png" alt="">
                                    <span class="">
                                      <span class="app">您还没有创建属于自己的应用，快来创建应用吧</span>
                                      <br/><br/>
                                      <a class="btn btn-primary fl">创建应用</a>
                                    </span>
                                  </div>
                                </div>
                              </div>
                            </section>
                            <!--话务量消费额-->
                            <section class="panel panel-default pos-rlt clearfix ">
                              <div class="sectionWrap">
                                <div class="panel-body clearfix border-top-none">
                                  <div class="row monthform" >
                                    <div class="col-md-12">
                                      <input type="text" class="datepicker currentMonth form-control date_block monthstart" value="2016-07" data-time="2016-06-07" />
                                    </div>
                                  </div>

                                  <div class="row">
                                    <div class="col-md-12 scanvas" >
                                      <!--统计列表-->
                                      <div class="ecpanel" id="ecpanel" style=" height: 600px;  "></div>
                                    </div>
                                  </div>
                                </div>
                              </div>


                            </section>
                            <!--话务量消费额end-->

                            <section class="panel panel-default pos-rlt clearfix ">


                                  <div class="row ">
                                  <div class="col-md-6 remove-left-padding" >
                                    <div class="sectionWrap">
                                      <div class="panel-body clearfix border-top-none">
                                        <div class="row">
                                          <div class="col-md-12">
                                             <input type="text" class="datepicker currentMonth form-control date_block sessionstart" value="2016-07" data-time="2016-06-07" />
                                           </div>
                                        </div>
                                        <div class="row" >
                                          <div class="col-md-12">
                                            <div class="ecpanel" id="sessionecpanel" style=" height: 600px;"></div>
                                          </div>
                                        </div>
                                       </div>
                                     </div>
                                  </div>


                                  <div class="col-md-6 remove-right-padding">
                                    <div class="sectionWrap">
                                      <div class="panel-body clearfix border-top-none">
                                        <div class="row">
                                          <div class="col-md-12">
                                            <input type="text" class="datepicker currentMonth form-control date_block apistart" value="2016-07" data-time="2016-06-07" />
                                          </div>
                                        </div>
                                        <div class="row">
                                          <div class="ecpanel" id="apiecpanel" style=" height: 600px;  "></div>
                                        </div>
                                       </div>
                                    </div>
                                  </div>
                                </div>


                            </section>



                            <!--end-->
                            </section>

                            <div id="footer" style="clear: both">
                              <p class="text-center">Copyright 2016 云呼你 粤ICP备16048993号 All Rights Reserved 广州流水行云科技有限公司</p>
                            </div>
                        </section>
                    </aside>
                </section>
                <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen" data-target="#nav"></a>
           </section>
        </section>
    </section>
</section>
<script src="js/app.v2.js"></script> <!-- Bootstrap --> <!-- App -->
<script src="js/charts/flot/jquery.flot.min.js" cache="false"></script>
<script src="js/bootbox.min.js"></script>
<script src="js/charts/flot/demo.js" cache="false"></script>


<!--统计插件-->
<script src="./js/echarts.min.js" ></script>
<!--统计插件主题-->
<script src="./js/echartstheme/wonderland.js" ></script>
<script>
  //查询
  $('.monthstart').change(function(){
    var id = $(this).attr('data-id');
    var tipsclass  = '.'+id+'tips';
    $(tipsclass).html('');
    var starttime =  $('.'+id+'start').val();
    if(starttime==''){
      tips(tipsclass,'请先填写时间'); return;
    }
    initchart();
  });

  //查询
  $('.sessionstart').change(function(){
    var id = $(this).attr('data-id');
    var tipsclass  = '.'+id+'tips';
    $(tipsclass).html('');
    var starttime =  $('.'+id+'start').val();
    if(starttime==''){
      tips(tipsclass,'请先填写时间'); return;
    }
    initsessionchart();
  });

  //查询
  $('.apistart').change(function(){
    var id = $(this).attr('data-id');
    var tipsclass  = '.'+id+'tips';
    $(tipsclass).html('');
    var starttime =  $('.'+id+'start').val();
    if(starttime==''){
      tips(tipsclass,'请先填写时间'); return;
    }
    initapichart();
  });




  //初始时间
  function initialStartTime(id){
    var starttime =  $('.'+id+'start').val();
    if(starttime==''){
      starttime = $('.'+id+'start').attr('data-time');
    }
    return starttime;
  }


  //触发函数
  /**
   * starttime 时间
   * endtime 对比时间
   */
  function initchart(){
    var starttime = initialStartTime();
    var param  = {starttime:starttime};
    //异步查询 返回json 数据
    //消费额最大值
    //会话次数最大值
    //数据处理

      //注意 tdata 等于 seriesjson[name]
      var tdata = new Array('5月','6月');
      var seriesjson  ="[{name:'5月',type:'line',data:[120, 132, 101, 134, 90, 230, 210,120, 132, 101, 134, 90, 230, 210,120, 132, 101, 134, 90, 230, 210,120, 132, 101,4000]},{name:'6月',type:'line',data:[220, 182, 191, 234, 290, 330, 310]}]";
      var seriesjson = eval('('+seriesjson+')');

    charts(tdata,seriesjson);
  }

  function initsessionchart(){

    var starttime = initialStartTime();
    var param  = {starttime:starttime};
    //异步查询 返回json 数据
    //消费额最大值
    //会话次数最大值
    //数据处理


    sessioncharts();
  }

  function initapichart(){
    apicharts();
  }


  var monthData = ['1日','2日','3日','4日','5日','6日','7日','8日','9日','10日','11日','12日','13日','14日','15日','16日','17日','18日','19日','20日','21日','22日','23日','24日','25日','26日','27日','28日','29日','30日','31日'];

  //测试随机生成数据
  function moneyDataMonth(){
    var res = [];
    var len = 31;
    while (len--) {
      res.push(Math.round(Math.random() * 1000));
    }
    return res;
  }

  //测试随机生成数据
  function moneyDataYear(){
    var res = [];
    var len = 12;
    while (len--) {
      res.push(Math.round(Math.random() * 1000));
    }
    return res;
  }

  //测试随机生成数据
  function meetDataMonth(){
    var res = [];
    var len = 0;
    while (len < 31) {
      res.push((Math.random()*10 + 5).toFixed(1) - 0);
      len++;
    }
    return res;
  }

  //测试随机生成数据
  function meetDataYear(){
    var res = [];
    var len = 0;
    while (len < 12) {
      res.push((Math.random()*10 + 5).toFixed(1) - 0);
      len++;
    }
    return res;
  }



  /**
   * 回调数据
   * @param xd 消费数据
   * @param yd 会话数据
   *
   *
   * @param type 年月
   */
  function charts(xd,yd){
    var Xdata = monthData;
    var xd = moneyDataMonth();
    var yd = meetDataMonth();
    var myChart = echarts.init(document.getElementById('ecpanel'),'wonderland');
    option = {
      title: {
        text: '',
        subtext: ''
      },
      tooltip: {
        trigger: 'axis'
      },
      legend: {
        data:['话务量', '消费额']
      },
      toolbox: {
        show: true,
      },
      dataZoom: {
        show: false,
        start: 0,
        end: 100
      },
      xAxis: [
        {
          type: 'category',
          boundaryGap: true,
          data : Xdata,
          name: '日期',

        },

      ],
      yAxis: [
        {
          type: 'value',
          scale: true,
          name: '会话(次)',
          max: 30,
          min: 0,
          nameGap:32,
          nameTextStyle:{
            color:'#999',
          },
          boundaryGap: [0.2,0.2]
        },
        {
          type: 'value',
          scale: true,
          name: '消费额(元)',
          max: 1200,
          min: 0,
          nameGap:32,
          nameTextStyle:{
            color:'#999',
          },
          boundaryGap: [0.2, 0.2]
        }
      ],
      series: [
        {
          name:'消费额',
          type:'bar',
          yAxisIndex: 1,
          data:xd
        },
        {
          name:'话务量',
          type:'line',
          data:yd
        }
      ]
    };
    myChart.setOption(option);
  }


  /**
   * 会话量 回调数据
   * @param xd 消费数据
   * @param yd 会话数据
   *
   */
  function sessioncharts(){
    var Xdata = monthData;
    var xd = moneyDataMonth();
    var yd = meetDataMonth();
    var sessionChart = echarts.init(document.getElementById('sessionecpanel'),'wonderland');

    option = {
      title: {
        text: ''
      },
      tooltip: {
        trigger: 'axis'
      },
      legend: {
        data:['会话量']
      },
      grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
      },
      toolbox: {
        feature: {
        }
      },
      xAxis: {
        type: 'category',
        boundaryGap: false,
        data : Xdata,
        name: '',
      },
      yAxis: {
        type: 'value'
      },
      series: [
        {
          name:'会话量',
          type:'line',
          stack: '总量',
          data:xd
        },
      ]
    };
    sessionChart.setOption(option);
  }

  /**
   * 会话量 回调数据
   * @param xd 消费数据
   * @param yd 会话数据
   *
   */
  function apicharts(){
    var Xdata = monthData;
    var xd = moneyDataMonth();
    var yd = meetDataMonth();
    var sessionChart = echarts.init(document.getElementById('apiecpanel'),'wonderland');

    option = {
      title: {
        text: ''
      },
      tooltip: {
        trigger: 'axis'
      },
      legend: {
        data:['api调用次数']
      },
      grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
      },
      toolbox: {
        feature: {
        }
      },
      xAxis: {
        type: 'category',
        boundaryGap: false,
        data : Xdata,
        name: '',
      },
      yAxis: {
        type: 'value'
      },
      series: [
        {
          name:'api调用次数',
          type:'line',
          stack: '',
          data:xd
        },
      ]
    };
    sessionChart.setOption(option);
  }


  //当浏览器大小变化时
  $(window).resize(function () {
    initchart();
    sessioncharts();
    apicharts();
  });
</script>


<script type="text/javascript" src="js/zero/ZeroClipboard.js"></script>
<script type="text/javascript">
  if(window.clipboardData){
    //支持IE
    var restapi = document.getElementById("restapi");
    restapi.onclick = function(){
      window.clipboardData.setData('text',restapi.innerHTML);
      showtoast('复制成功');
    }

    var secretkey = document.getElementById("secretkey");
    secretkey.onclick = function(){
      window.clipboardData.setData('text',secretkey.innerHTML);
      showtoast('复制成功');
    }

    var certid = document.getElementById("certid");
    certid.onclick = function(){
      window.clipboardData.setData('text',certid.innerHTML);
      showtoast('复制成功');
    }


  }else{

   var restapi = new ZeroClipboard( document.getElementById("copyapi"), {
      moviePath: "js/zero/ZeroClipboard.swf"
    } );
    var secrekey = new ZeroClipboard( document.getElementById("copysecrekey"), {
      moviePath: "js/zero/ZeroClipboard.swf"
    } );
    var certid = new ZeroClipboard( document.getElementById("copycertid"), {
      moviePath: "js/zero/ZeroClipboard.swf"
    } );
    restapi.on( 'complete', function(client, args) {
      showtoast('复制成功');
    } );


  }




</script>


<script src="js/include.js" aysnc></script>
<script src="js/include.js"></script>
<script type="text/javascript">
    $('.reset_confirm').click(function(){
      bootbox.setLocale("zh_CN");
      bootbox.confirm("确认重新生成？", function(result) {
            if(result){
                $('.tips-key').html('错误提示');
                $('.secretkey').html('aaaaaaaaaaaaaaaaaaaa');
            }
        });
    });

    $('#common-close').click(function(){
      $('.common-info').fadeOut()

    })



</script>
<script type="text/javascript" src='./js/bootstrap-datepicker/js/bootstrap-datepicker.js'> </script>
<script type="text/javascript" src='./js/bootstrap-datepicker/locales/bootstrap-datepicker.zh-CN.min.js'> </script>
<script src="js/index/index.js" ></script>



</body>
</html>
